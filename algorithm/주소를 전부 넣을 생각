from selenium import webdriver
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
import time

def wait_for_results(driver):
    try:
        # 검색 결과가 나타날 때까지 기다림 
        WebDriverWait(driver, 20).until(
            EC.presence_of_element_located((By.CLASS_NAME, 'PlaceItem'))
        )
    except:
        print("Timeout: 검색 결과가 나타나지 않았습니다.")

database = [
    {"id": 1, "address": "서울특별시 강남구 테헤란로 152",},
    {"id": 2, "address": "부산광역시 해운대구 센텀남대로 350",},
    {"id": 3, "address": "대구광역시 동구 동대구로 550",}
]

def get_address_from_db(id):
    for entry in database:
        if entry["id"] == id:
            return entry["address"]
    return None

search_id = int(input("검색할 주소의 ID를 입력하세요: "))
search_address = get_address_from_db(search_id)

driver = webdriver.Chrome()

# 지도 페이지 열기
driver.get('https://map.kakao.com/')
time.sleep(3)

# 검색창에 검색어 입력
search_box = driver.find_element(By.XPATH,r'//*[@id="search.keyword.query"]')
search_box.send_keys(search_address)
driver.find_element(By.XPATH, r'//*[@id="search.keyword.submit"]').send_keys(Keys.ENTER)

# 일정 시간 대기 (지도가 로드되기를 기다리기 위해)
wait_for_results(driver)

checkInput = input("종료를 원하신다면 Enter를 누르세요.")

if checkInput == '\n':
    driver.quit()
